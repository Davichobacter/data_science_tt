<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificación Scrum Master | Guía Interactiva</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Font Awesome (for icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom Chart Container Styling as per requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Hide scrollbar for clean look */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    
    <!-- Chosen Palette: Slate & Indigo - Professional, calm, trustworthy for certification study. -->
    <!-- Application Structure Plan: Dashboard Layout. 
         1. Sidebar Navigation: For quick access to the 5 key modules (Fundamentals, Team, Events, Artifacts, Simulator).
         2. Content Area: Dynamic injection of views based on selection.
         3. Modules:
            - Fundamentals: Visual cards for pillars/values.
            - Team: Tabbed interface for deep dive into accountabilities.
            - Events: Chart.js Bar chart for timeboxes + interactive list.
            - Artifacts: Grid layout linking artifacts to commitments.
            - Simulator: Interactive quiz state machine (Question -> Selection -> Feedback -> Next).
         Why? Breaks dense text into digestible chunks. The quiz validates learning immediately.
    -->
    <!-- Visualization & Content Choices: 
         - Event Timeboxes: Bar Chart (Chart.js) to visually compare the maximum duration of events.
         - Logic: JS handles navigation state, quiz scoring, and content rendering.
         - Icons: FontAwesome to replace SVG requirement.
         - Data: All text/quiz data stored in JS objects. 
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 text-slate-800 h-screen flex overflow-hidden selection:bg-indigo-100 selection:text-indigo-700">

    <!-- Mobile Header -->
    <header class="md:hidden bg-white border-b border-slate-200 p-4 flex justify-between items-center fixed w-full top-0 z-20">
        <h1 class="text-indigo-700 font-bold text-lg"><i class="fas fa-certificate mr-2"></i>Scrum Master Prep</h1>
        <button id="mobile-menu-btn" class="text-slate-600 focus:outline-none">
            <i class="fas fa-bars text-xl"></i>
        </button>
    </header>

    <!-- Sidebar Navigation -->
    <aside id="sidebar" class="bg-slate-900 text-white w-64 flex-shrink-0 hidden md:flex flex-col h-full transition-all duration-300 fixed md:relative z-10 pt-16 md:pt-0">
        <div class="p-6 border-b border-slate-700">
            <h1 class="text-2xl font-bold tracking-tight text-indigo-400">Scrum Master</h1>
            <p class="text-xs text-slate-400 mt-1">Guía de Certificación (2020)</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto py-4">
            <ul class="space-y-1 px-3">
                <li>
                    <button onclick="router('home')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-slate-800 transition-colors flex items-center group active-nav" data-target="home">
                        <i class="fas fa-home w-6 text-indigo-400 group-hover:text-white transition-colors"></i>
                        <span class="font-medium">Inicio</span>
                    </button>
                </li>
                <li>
                    <button onclick="router('fundamentals')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-slate-800 transition-colors flex items-center group" data-target="fundamentals">
                        <i class="fas fa-layer-group w-6 text-indigo-400 group-hover:text-white transition-colors"></i>
                        <span class="font-medium">Fundamentos</span>
                    </button>
                </li>
                <li>
                    <button onclick="router('team')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-slate-800 transition-colors flex items-center group" data-target="team">
                        <i class="fas fa-users w-6 text-indigo-400 group-hover:text-white transition-colors"></i>
                        <span class="font-medium">El Equipo Scrum</span>
                    </button>
                </li>
                <li>
                    <button onclick="router('events')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-slate-800 transition-colors flex items-center group" data-target="events">
                        <i class="fas fa-calendar-alt w-6 text-indigo-400 group-hover:text-white transition-colors"></i>
                        <span class="font-medium">Eventos</span>
                    </button>
                </li>
                <li>
                    <button onclick="router('artifacts')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-slate-800 transition-colors flex items-center group" data-target="artifacts">
                        <i class="fas fa-box-open w-6 text-indigo-400 group-hover:text-white transition-colors"></i>
                        <span class="font-medium">Artefactos</span>
                    </button>
                </li>
                <li class="mt-4 pt-4 border-t border-slate-700">
                    <button onclick="router('simulator')" class="nav-btn w-full text-left px-4 py-3 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white transition-colors flex items-center shadow-lg group" data-target="simulator">
                        <i class="fas fa-clipboard-check w-6 text-white"></i>
                        <span class="font-bold">Simulador Examen</span>
                    </button>
                </li>
            </ul>
        </nav>
        
        <div class="p-4 border-t border-slate-700 text-xs text-slate-500 text-center">
            Basado en Guía Scrum 2020
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto bg-slate-50 pt-16 md:pt-0 relative w-full">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" id="content-area">
            <!-- Dynamic Content Will Be Injected Here -->
        </div>
    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA STORE ---
        
        const appData = {
            fundamentals: {
                intro: "Scrum es un marco de trabajo liviano basado en el empirismo y el pensamiento Lean. No es una metodología rígida, sino una estructura para generar valor adaptativo.",
                pillars: [
                    { title: "Transparencia", icon: "fa-eye", desc: "El proceso y el trabajo emergente deben ser visibles para quienes realizan el trabajo y quienes lo reciben." },
                    { title: "Inspección", icon: "fa-magnifying-glass", desc: "Inspeccionar frecuentemente los artefactos y el progreso para detectar variaciones indeseadas." },
                    { title: "Adaptación", icon: "fa-screwdriver-wrench", desc: "Si algo se desvía de los límites aceptables, el proceso o el material debe ajustarse lo antes posible." }
                ],
                values: [
                    { title: "Compromiso", desc: "Con el objetivo y la calidad del trabajo." },
                    { title: "Foco", desc: "En el trabajo del Sprint y los objetivos." },
                    { title: "Franqueza", desc: "Sobre el trabajo y los desafíos (Openness)." },
                    { title: "Respeto", desc: "Entre miembros como personas capaces." },
                    { title: "Coraje", desc: "Para hacer lo correcto y trabajar en problemas difíciles." }
                ]
            },
            team: [
                {
                    id: "devs",
                    role: "Desarrolladores",
                    icon: "fa-code",
                    summary: "Los creadores del Incremento.",
                    responsibilities: [
                        "Crear el Sprint Backlog (Plan).",
                        "Inculcar calidad (Definition of Done).",
                        "Adaptar su plan diariamente."
                    ],
                    example: "En un equipo de software, no solo son programadores. Un diseñador UX, un tester y un documentador técnico también son 'Desarrolladores' si trabajan activamente en construir el incremento."
                },
                {
                    id: "po",
                    role: "Product Owner",
                    icon: "fa-user-tie",
                    summary: "Maximizador de Valor.",
                    responsibilities: [
                        "Desarrollar y comunicar el Objetivo del Producto.",
                        "Crear y ordenar elementos del Backlog.",
                        "Asegurar transparencia del Backlog."
                    ],
                    example: "Un PO recibe 50 peticiones. Su trabajo no es decir 'sí' a todo, sino priorizar para trabajar primero en lo que generará más ingresos o satisfacción."
                },
                {
                    id: "sm",
                    role: "Scrum Master",
                    icon: "fa-hands-helping",
                    summary: "Líder Servidor (True Leader).",
                    responsibilities: [
                        "Establecer Scrum según la Guía.",
                        "Ayudar al equipo a autogestionarse.",
                        "Eliminar impedimentos.",
                        "Facilitar eventos si se requiere."
                    ],
                    example: "Si las computadoras lentas retrasan al equipo, el SM gestiona con la gerencia para aprobar el presupuesto y eliminar ese impedimento."
                }
            ],
            events: [
                { name: "Sprint", time: "1 mes máx", desc: "Contenedor de todos los eventos. No se permiten cambios que pongan en peligro el Objetivo." },
                { name: "Sprint Planning", time: "8 horas", desc: "Se define: ¿Por qué es valioso? ¿Qué se hará? ¿Cómo se hará?" },
                { name: "Daily Scrum", time: "15 min", desc: "Para Developers. Inspeccionar progreso y adaptar el Sprint Backlog. No es reporte al jefe." },
                { name: "Sprint Review", time: "4 horas", desc: "Inspeccionar resultado con Stakeholders. No es solo una demo, es sesión de trabajo." },
                { name: "Sprint Retrospective", time: "3 horas", desc: "El equipo se inspecciona a sí mismo (procesos, herramientas) para mejorar calidad." }
            ],
            artifacts: [
                { 
                    name: "Product Backlog", 
                    commitment: "Objetivo del Producto", 
                    desc: "Lista ordenada de todo lo que se conoce que es necesario en el producto.",
                    commDesc: "Describe un estado futuro del producto que sirve como objetivo a largo plazo."
                },
                { 
                    name: "Sprint Backlog", 
                    commitment: "Objetivo del Sprint", 
                    desc: "Conjunto de items seleccionados + plan de entrega.",
                    commDesc: "El propósito único del Sprint. Crea coherencia y foco."
                },
                { 
                    name: "Incremento", 
                    commitment: "Definition of Done (DoD)", 
                    desc: "Un peldaño concreto hacia el Objetivo del Producto.",
                    commDesc: "Si un item no cumple la DoD, no es un incremento y vuelve al backlog. Asegura transparencia de calidad."
                }
            ],
            quiz: [
                {
                    id: 1,
                    q: "Durante el Sprint, un Stakeholder pide urgentemente una nueva funcionalidad pequeña al equipo. ¿Qué hace el SM?",
                    options: [
                        "Permitir que el equipo la haga si es pequeña.",
                        "Decirle al equipo que la agregue al próximo Sprint.",
                        "Dirigir al Stakeholder con el Product Owner.",
                        "Agregar la tarea al Sprint Backlog él mismo."
                    ],
                    correct: 2,
                    explanation: "El PO es el único responsable de gestionar el Product Backlog y el valor. Interrupciones directas al equipo rompen el foco."
                },
                {
                    id: 2,
                    q: "¿Quién es requerido obligatoriamente para asistir al Daily Scrum?",
                    options: [
                        "El Scrum Master y el Product Owner.",
                        "Los Developers.",
                        "Los Developers y el Product Owner.",
                        "Todo el Scrum Team."
                    ],
                    correct: 1,
                    explanation: "Es un evento por y para los Developers. Otros asisten solo si participan activamente como developers en el sprint."
                },
                {
                    id: 3,
                    q: "¿Quién tiene la autoridad para cancelar un Sprint?",
                    options: [
                        "El Scrum Master.",
                        "Los Developers.",
                        "El Product Owner.",
                        "El CEO."
                    ],
                    correct: 2,
                    explanation: "Solo el PO puede cancelar el Sprint si el Objetivo del Sprint queda obsoleto."
                },
                {
                    id: 4,
                    q: "Si no existe una Definition of Done (DoD) organizacional, ¿quién la crea?",
                    options: [
                        "El Scrum Master.",
                        "El Product Owner.",
                        "El Scrum Team.",
                        "QA."
                    ],
                    correct: 2,
                    explanation: "El Scrum Team debe crear una DoD apropiada si la organización no provee una."
                },
                {
                    id: 5,
                    q: "¿Cuándo termina un Sprint?",
                    options: [
                        "Cuando se terminan los items.",
                        "Cuando el PO aprueba.",
                        "Cuando el timebox expira.",
                        "Cuando termina el testing."
                    ],
                    correct: 2,
                    explanation: "Los eventos son Timeboxed. El Sprint termina cuando se acaba el tiempo fijado (ej. 1 mes)."
                },
                {
                    id: 6,
                    q: "¿Cuál es el compromiso del Product Backlog?",
                    options: [
                        "Visión del Sprint.",
                        "Objetivo del Producto.",
                        "Definition of Done.",
                        "Sprint Backlog."
                    ],
                    correct: 1,
                    explanation: "El compromiso del Product Backlog es el Objetivo del Producto (Product Goal)."
                },
                {
                    id: 7,
                    q: "¿El Refinamiento es un evento formal?",
                    options: [
                        "Sí, ocurre en la Planning.",
                        "No, es una actividad continua.",
                        "Sí, ocurre en la Review.",
                        "Solo al inicio del proyecto."
                    ],
                    correct: 1,
                    explanation: "Es una actividad continua a lo largo del Sprint, no un evento con timebox fijo."
                },
                {
                    id: 8,
                    q: "El Daily Scrum se extiende a 45 min por discusiones técnicas. ¿Qué hace el SM?",
                    options: [
                        "Resolver el problema técnico.",
                        "Cancelar la reunión.",
                        "Enseñar a mantener el timebox y discutir detalles después.",
                        "Extender el tiempo oficial."
                    ],
                    correct: 2,
                    explanation: "El SM asegura que se respete el timebox. Los problemas profundos se resuelven fuera del Daily."
                }
            ]
        };

        // --- RENDER FUNCTIONS ---

        function renderHome() {
            return `
                <div class="fade-in">
                    <div class="bg-indigo-600 rounded-2xl p-8 text-white shadow-xl mb-8">
                        <h2 class="text-3xl font-bold mb-4">Bienvenido a tu Certificación Scrum Master</h2>
                        <p class="text-indigo-100 text-lg mb-6 max-w-3xl">
                            Esta herramienta interactiva condensa la Guía de Scrum 2020 y materiales de estudio clave. 
                            Explora los módulos para dominar la teoría y practica con el simulador real.
                        </p>
                        <button onclick="router('fundamentals')" class="bg-white text-indigo-600 px-6 py-3 rounded-lg font-bold hover:bg-indigo-50 transition-colors shadow-md">
                            Comenzar Estudio <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 card-hover cursor-pointer" onclick="router('fundamentals')">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 mb-4">
                                <i class="fas fa-layer-group text-xl"></i>
                            </div>
                            <h3 class="font-bold text-lg text-slate-800">Fundamentos</h3>
                            <p class="text-slate-500 text-sm mt-2">Empirismo, Lean Thinking y los 5 Valores.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 card-hover cursor-pointer" onclick="router('team')">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center text-green-600 mb-4">
                                <i class="fas fa-users text-xl"></i>
                            </div>
                            <h3 class="font-bold text-lg text-slate-800">Roles</h3>
                            <p class="text-slate-500 text-sm mt-2">Desarrolladores, PO y Scrum Master.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 card-hover cursor-pointer" onclick="router('events')">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center text-orange-600 mb-4">
                                <i class="fas fa-calendar-alt text-xl"></i>
                            </div>
                            <h3 class="font-bold text-lg text-slate-800">Eventos</h3>
                            <p class="text-slate-500 text-sm mt-2">Timeboxes, propósitos y ejemplos prácticos.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 card-hover cursor-pointer" onclick="router('simulator')">
                            <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 mb-4">
                                <i class="fas fa-question text-xl"></i>
                            </div>
                            <h3 class="font-bold text-lg text-slate-800">Simulador</h3>
                            <p class="text-slate-500 text-sm mt-2">Preguntas tipo examen con explicación.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderFundamentals() {
            const pillarsHtml = appData.fundamentals.pillars.map(p => `
                <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-indigo-500">
                    <div class="flex items-center mb-3">
                        <i class="fas ${p.icon} text-indigo-500 text-xl mr-3"></i>
                        <h4 class="font-bold text-lg">${p.title}</h4>
                    </div>
                    <p class="text-slate-600 text-sm leading-relaxed">${p.desc}</p>
                </div>
            `).join('');

            const valuesHtml = appData.fundamentals.values.map(v => `
                <div class="group bg-slate-50 hover:bg-white border border-slate-200 p-4 rounded-lg text-center transition-all duration-300 hover:shadow-md cursor-default">
                    <h4 class="font-bold text-indigo-700 text-xl mb-2">${v.title}</h4>
                    <p class="text-slate-600 text-sm opacity-60 group-hover:opacity-100 transition-opacity">${v.desc}</p>
                </div>
            `).join('');

            return `
                <div class="fade-in space-y-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4 border-b pb-2">Teoría Scrum</h2>
                        <p class="text-slate-600 mb-6">${appData.fundamentals.intro}</p>
                        
                        <h3 class="text-lg font-semibold text-slate-700 mb-4">Los 3 Pilares del Empirismo</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            ${pillarsHtml}
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <h3 class="text-lg font-semibold text-slate-700 mb-6 text-center">Los 5 Valores de Scrum</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4">
                            ${valuesHtml}
                        </div>
                        <p class="text-center text-xs text-slate-400 mt-6">Sin estos valores, los pilares del empirismo no cobran vida.</p>
                    </div>
                </div>
            `;
        }

        function renderTeam() {
            return `
                <div class="fade-in h-full flex flex-col">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-6">
                        <h2 class="text-2xl font-bold text-slate-800 mb-2">El Equipo Scrum (Accountabilities)</h2>
                        <p class="text-slate-600">No hay jerarquías. Es una unidad cohesionada enfocada en un objetivo a la vez.</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Buttons/Tabs -->
                        <div class="space-y-4">
                            ${appData.team.map(role => `
                                <button onclick="selectRole('${role.id}')" id="btn-${role.id}" class="role-btn w-full bg-white p-4 rounded-xl shadow-sm border border-slate-200 hover:border-indigo-400 transition-all text-left group flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-slate-100 group-hover:bg-indigo-100 flex items-center justify-center mr-4 transition-colors">
                                        <i class="fas ${role.icon} text-slate-500 group-hover:text-indigo-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-slate-800">${role.role}</h4>
                                        <p class="text-xs text-slate-500">${role.summary}</p>
                                    </div>
                                </button>
                            `).join('')}
                        </div>

                        <!-- Details Panel -->
                        <div class="lg:col-span-2 bg-white rounded-xl shadow-lg border border-slate-200 p-8 relative overflow-hidden">
                            <div class="absolute top-0 right-0 p-4 opacity-5">
                                <i class="fas fa-users text-9xl"></i>
                            </div>
                            <div id="role-content">
                                <!-- JS will populate this -->
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderEvents() {
            return `
                <div class="fade-in space-y-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Chart Section -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                            <h3 class="text-lg font-bold text-slate-800 mb-4">Timeboxes (Duración Máxima)</h3>
                            <p class="text-sm text-slate-500 mb-4">Basado en un Sprint de 1 mes. Si el Sprint es más corto, los eventos suelen ser más cortos.</p>
                            
                            <div class="chart-container">
                                <canvas id="eventsChart"></canvas>
                            </div>
                        </div>

                        <!-- List Section -->
                        <div class="space-y-4">
                            ${appData.events.map((e, idx) => `
                                <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-indigo-400 hover:bg-slate-50 transition-colors">
                                    <div class="flex justify-between items-start mb-2">
                                        <h4 class="font-bold text-indigo-900">${e.name}</h4>
                                        <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded font-mono">${e.time}</span>
                                    </div>
                                    <p class="text-slate-600 text-sm">${e.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="bg-indigo-50 border border-indigo-100 p-4 rounded-lg flex items-start">
                        <i class="fas fa-lightbulb text-indigo-500 mt-1 mr-3"></i>
                        <div>
                            <h4 class="font-bold text-indigo-800 text-sm">Ejemplo Práctico: Daily Scrum</h4>
                            <p class="text-indigo-700 text-sm mt-1">
                                En lugar de decir "Ayer programé la base de datos", un desarrollador efectivo dice: 
                                "Ayer terminé la estructura de datos que nos acerca al objetivo, pero tengo un bloqueo con la API de pagos que pone en riesgo el Sprint".
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderArtifacts() {
            return `
                <div class="fade-in">
                    <div class="text-center mb-8">
                        <h2 class="text-2xl font-bold text-slate-800">Artefactos y Compromisos</h2>
                        <p class="text-slate-600 mt-2">Cada artefacto contiene un compromiso para asegurar transparencia y foco.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        ${appData.artifacts.map(art => `
                            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-full">
                                <div class="bg-slate-50 p-4 border-b border-slate-100">
                                    <h3 class="text-lg font-bold text-slate-800"><i class="fas fa-box text-indigo-500 mr-2"></i>${art.name}</h3>
                                    <p class="text-xs text-slate-500 mt-1 h-10">${art.desc}</p>
                                </div>
                                <div class="p-4 flex-1 flex flex-col justify-center items-center text-center bg-indigo-50/30">
                                    <div class="text-slate-400 text-xs uppercase font-bold tracking-wider mb-2">Compromiso</div>
                                    <div class="font-bold text-indigo-700 text-lg mb-2">${art.commitment}</div>
                                    <p class="text-sm text-slate-600">${art.commDesc}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="mt-8 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-slate-800 mb-2">Definition of Done (DoD) - Ejemplo Real</h3>
                        <div class="flex flex-col md:flex-row gap-4 items-center">
                            <div class="flex-1 text-sm text-slate-600">
                                <p>"Código compilado, pruebas unitarias pasadas al 90%, revisado por pares, documentación actualizada, aprobado en entorno de QA".</p>
                                <p class="mt-2 text-red-500 font-medium"><i class="fas fa-exclamation-triangle mr-1"></i> Si falta la documentación, el ítem NO está terminado y vuelve al Backlog.</p>
                            </div>
                            <div class="flex gap-2">
                                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold">Calidad</span>
                                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold">Transparencia</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- SIMULATOR LOGIC ---
        let currentQuizIndex = 0;
        let score = 0;
        let quizAnswers = new Array(appData.quiz.length).fill(null); // Stores user choice index or null

        function renderSimulator() {
            const question = appData.quiz[currentQuizIndex];
            const isAnswered = quizAnswers[currentQuizIndex] !== null;
            
            const optionsHtml = question.options.map((opt, idx) => {
                let btnClass = "bg-white border-2 border-slate-200 hover:border-indigo-300 text-slate-700";
                let icon = "";
                
                if (isAnswered) {
                    if (idx === question.correct) {
                        btnClass = "bg-green-50 border-2 border-green-500 text-green-800";
                        icon = '<i class="fas fa-check-circle float-right mt-1"></i>';
                    } else if (idx === quizAnswers[currentQuizIndex]) {
                        btnClass = "bg-red-50 border-2 border-red-500 text-red-800";
                        icon = '<i class="fas fa-times-circle float-right mt-1"></i>';
                    } else {
                        btnClass = "bg-slate-50 border-slate-200 text-slate-400 opacity-60";
                    }
                }

                return `
                    <button onclick="handleAnswer(${idx})" ${isAnswered ? 'disabled' : ''} 
                        class="w-full text-left p-4 rounded-lg mb-3 transition-all ${btnClass}">
                        <span class="font-medium">${String.fromCharCode(65 + idx)}.</span> ${opt}
                        ${icon}
                    </button>
                `;
            }).join('');

            return `
                <div class="fade-in max-w-3xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-slate-800">Simulador de Examen</h2>
                        <div class="bg-indigo-100 text-indigo-700 px-4 py-2 rounded-full font-bold text-sm">
                            Pregunta ${currentQuizIndex + 1} / ${appData.quiz.length}
                        </div>
                    </div>

                    <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border border-slate-200 mb-6">
                        <p class="text-lg font-medium text-slate-800 mb-6">${question.q}</p>
                        
                        <div class="mb-6">
                            ${optionsHtml}
                        </div>

                        ${isAnswered ? `
                            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded animate-fade-in">
                                <h4 class="font-bold text-blue-800 mb-1"><i class="fas fa-info-circle mr-2"></i>Explicación</h4>
                                <p class="text-blue-700 text-sm">${question.explanation}</p>
                            </div>
                        ` : ''}
                    </div>

                    <div class="flex justify-between items-center">
                        <button onclick="changeQuestion(-1)" ${currentQuizIndex === 0 ? 'disabled class="opacity-0"' : 'class="text-slate-500 hover:text-indigo-600 font-medium px-4 py-2"'} >
                            <i class="fas fa-arrow-left mr-2"></i> Anterior
                        </button>

                        ${isAnswered && currentQuizIndex < appData.quiz.length - 1 ? `
                            <button onclick="changeQuestion(1)" class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-indigo-700 shadow-md transition-colors">
                                Siguiente <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        ` : ''}
                        
                        ${isAnswered && currentQuizIndex === appData.quiz.length - 1 ? `
                            <button onclick="showResults()" class="bg-green-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-green-700 shadow-md transition-colors">
                                Finalizar <i class="fas fa-flag-checkered ml-2"></i>
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function handleAnswer(selectedIndex) {
            quizAnswers[currentQuizIndex] = selectedIndex;
            if (selectedIndex === appData.quiz[currentQuizIndex].correct) {
                score++;
            }
            refreshView();
        }

        function changeQuestion(delta) {
            currentQuizIndex += delta;
            refreshView();
        }

        function showResults() {
            const percentage = Math.round((score / appData.quiz.length) * 100);
            let msg = "";
            let color = "";
            
            if (percentage >= 85) { msg = "¡Excelente! Estás listo."; color = "text-green-600"; }
            else if (percentage >= 70) { msg = "Bien, pero repasa los errores."; color = "text-yellow-600"; }
            else { msg = "Necesitas estudiar más los fundamentos."; color = "text-red-600"; }

            const html = `
                <div class="fade-in max-w-2xl mx-auto text-center bg-white p-10 rounded-2xl shadow-xl border border-slate-200">
                    <div class="w-24 h-24 mx-auto bg-slate-100 rounded-full flex items-center justify-center mb-6">
                        <i class="fas fa-trophy text-4xl text-yellow-500"></i>
                    </div>
                    <h2 class="text-3xl font-bold text-slate-800 mb-2">Resultados</h2>
                    <div class="text-5xl font-extrabold ${color} mb-4">${percentage}%</div>
                    <p class="text-xl text-slate-600 mb-8">${msg}</p>
                    <p class="text-slate-500 mb-8">Acertaste ${score} de ${appData.quiz.length} preguntas.</p>
                    
                    <button onclick="resetQuiz()" class="bg-indigo-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-indigo-700 transition-colors">
                        Intentar de nuevo
                    </button>
                </div>
            `;
            document.getElementById('content-area').innerHTML = html;
        }

        function resetQuiz() {
            currentQuizIndex = 0;
            score = 0;
            quizAnswers = new Array(appData.quiz.length).fill(null);
            router('simulator');
        }

        // --- INTERACTION HANDLERS ---

        function selectRole(roleId) {
            // Update UI buttons
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('border-indigo-500', 'bg-indigo-50');
                btn.classList.add('border-slate-200', 'bg-white');
            });
            const activeBtn = document.getElementById(`btn-${roleId}`);
            activeBtn.classList.remove('border-slate-200', 'bg-white');
            activeBtn.classList.add('border-indigo-500', 'bg-indigo-50');

            // Render Content
            const data = appData.team.find(r => r.id === roleId);
            const content = document.getElementById('role-content');
            
            content.innerHTML = `
                <div class="fade-in">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-1">${data.role}</h3>
                    <p class="text-slate-500 italic mb-6">${data.summary}</p>
                    
                    <h4 class="font-bold text-slate-800 mb-3">Responsabilidades Clave:</h4>
                    <ul class="list-disc list-inside space-y-2 text-slate-600 mb-6">
                        ${data.responsibilities.map(r => `<li>${r}</li>`).join('')}
                    </ul>

                    <div class="bg-orange-50 border-l-4 border-orange-400 p-4 rounded">
                        <h4 class="font-bold text-orange-800 text-sm mb-1"><i class="fas fa-lightbulb mr-2"></i>Ejemplo Real</h4>
                        <p class="text-orange-900 text-sm">${data.example}</p>
                    </div>
                </div>
            `;
        }

        // --- CHART GENERATION ---
        
        function initEventsChart() {
            const ctx = document.getElementById('eventsChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Sprint Planning', 'Review', 'Retrospective', 'Daily (x20)'],
                    datasets: [{
                        label: 'Duración Máxima (Horas/Mes)',
                        data: [8, 4, 3, 5], // Daily is 15m * 20 days = 300m = 5h
                        backgroundColor: [
                            'rgba(79, 70, 229, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(245, 158, 11, 0.7)'
                        ],
                        borderColor: [
                            'rgb(79, 70, 229)',
                            'rgb(59, 130, 246)',
                            'rgb(16, 185, 129)',
                            'rgb(245, 158, 11)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw + ' horas (max)';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Horas' }
                        }
                    }
                }
            });
        }

        // --- CORE ROUTER ---

        function router(view) {
            // Update Sidebar State
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if (btn.dataset.target === view) {
                    btn.classList.add('bg-slate-800', 'text-white');
                    btn.classList.remove('text-slate-400');
                    btn.querySelector('i').classList.remove('text-indigo-400');
                    btn.querySelector('i').classList.add('text-white');
                } else {
                    btn.classList.remove('bg-slate-800', 'text-white');
                    btn.classList.add('text-slate-400');
                    // Reset simulator button specifically
                    if(btn.dataset.target === 'simulator') {
                        btn.classList.remove('bg-indigo-600', 'text-white');
                        btn.classList.add('bg-transparent');
                    } else {
                        btn.querySelector('i').classList.add('text-indigo-400');
                        btn.querySelector('i').classList.remove('text-white');
                    }
                }
            });

            // Special styling for Simulator button when not active
            const simBtn = document.querySelector('[data-target="simulator"]');
            if (view !== 'simulator') {
                simBtn.classList.add('bg-indigo-600', 'text-white');
                simBtn.classList.remove('bg-transparent', 'text-slate-400');
            }

            const contentArea = document.getElementById('content-area');
            
            // Render View
            switch(view) {
                case 'home': contentArea.innerHTML = renderHome(); break;
                case 'fundamentals': contentArea.innerHTML = renderFundamentals(); break;
                case 'team': 
                    contentArea.innerHTML = renderTeam(); 
                    selectRole('sm'); // Default selection
                    break;
                case 'events': 
                    contentArea.innerHTML = renderEvents(); 
                    setTimeout(initEventsChart, 100); // Wait for DOM
                    break;
                case 'artifacts': contentArea.innerHTML = renderArtifacts(); break;
                case 'simulator': 
                    if(currentQuizIndex === 0 && score === 0 && quizAnswers[0] === null) {
                        contentArea.innerHTML = renderSimulator(); 
                    } else {
                         refreshView(); // Keep state
                    }
                    break;
            }

            // Close mobile menu if open
            const sidebar = document.getElementById('sidebar');
            if (!sidebar.classList.contains('hidden') && window.innerWidth < 768) {
               sidebar.classList.add('hidden');
            }
        }

        function refreshView() {
            document.getElementById('content-area').innerHTML = renderSimulator();
        }

        // Mobile Menu Toggle
        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('hidden');
            sidebar.classList.toggle('w-full'); // Full width on mobile
            sidebar.classList.toggle('fixed');
            sidebar.classList.toggle('inset-0');
            sidebar.classList.toggle('z-50');
        });

        // Initialize
        router('home');

    </script>
</body>
</html>